\ProvidesPackage{_oxford}

\newif\ifextraA\extraAfalse
\newif\ifextraB\extraBfalse
\newif\ifextraC\extraCfalse

%\fi\fi % to fix highlighting in nvim

\newif\if@oxford@papers@is\@oxford@papers@isfalse
\DeclareOption{pastpapers}{\@oxford@papers@istrue}

\ProcessOptions\relax

\newcommand{\probsection}[1]{
    \setcounter{probcntr}{0}
    \renewcommand{\thesubsection}{\arabic{subsection}.#1}
}

\def\problemSection{
    % \counterwithin{problemBase}{subsection}
    % \renewcommand{\theproblemBase}{\arabic{subsection}.\arabic{problemBase}}

    % \renewcommand{\subsubsection}{Section \Alph{subsubsection}}

    % \counterwithin{ProblemBase}{subsection}
    % \renewcommand{\theProblemBase}{\arabic{subsection}.\arabic{ProblemBase}}

    % \renewcommand{\thesubsection}{\arabic{subsection}.}
    % \titlecontents{subsection} [1.5em] {} {{\thecontentslabel} \hspace{.5em}} {} {\titlerule*[.5pc]{.}\contentspage}

    % \newpage
    % \setcounter{section}{0}
    % \renewcommand{\thesubsection}{\Alph{subsection}}
    % \renewcommand{\thesection}{ Sheet \arabic{section}}
    % \counterwithin{problemBase}{subsection}
    % \renewcommand{\theproblemBase}{\arabic{section}.\Alph{subsection}.\arabic{problemBase}}

    \newpage
    \renewcommand{\thesubsection}{\arabic{subsection}}
}


\def\noproblemSection{
    \counterwithin{problemBase}{section}
    \counterwithin{ProblemBase}{section}
    \makeatletter
    \renewcommand{\theproblemBase}{\arabic{section}.\arabic{subsection}.\arabic{problemBase}}
    \renewcommand{\theProblemBase}{\arabic{section}.\arabic{subsection}.\arabic{ProblemBase}}
    \renewcommand{\thesubsection}{\arabic{section}.\arabic{subsection}.}
    \titlecontents{subsection} [1.5em] {} {{\thecontentslabel} \hspace{.5em}} {} {\titlerule*[.5pc]{.}\contentspage}
    \makeatother
}

\renewcommand\notestyle{\bfseries}
\renewcommand\imp[1]{\textbf{#1}}

\newcommand{\fullnotes}{
    \extraAtrue
    \extraBtrue
    \extraCtrue
}

% \AddToHook{cmd/section/before}{\clearpage}

% \renewcommand\imp[1]{\textcolor{NordRed}{\textbf{#1}}}
\renewcommand\imp[1]{\textbf{#1}}


%%% past papers
\if@oxford@papers@is
    \usepackage{nextpage}

    \usepackage{fancyhdr}
    \pagestyle{fancy}
    \fancyhf{}
    \fancyhead[L]{\rightmark}
    \fancyhead[R]{\thepage}

    \newcommand{\addpaper}[1]{
        \cleartoevenpage
        \subsection{#1}
        \includepdf[pages=2-, noautoscale=true, scale=1, pagecommand={\pagestyle{fancy}}]{#1}
    }

    \newcommand{\addsoln}[1]{
        \cleartoevenpage
        \subsection{#1}
        \includepdf[pages=-, noautoscale=true, scale=1, pagecommand={\pagestyle{fancy}}]{#1_soln}
    }

    \newcommand{\papersection}[1]{
        % \section{#1}
        % \addcontentsline{toc}{section}{\textbf{#1}}
        % \stepcounter{section}
        \phantomsection
        \stepcounter{section}
        \addcontentsline{toc}{section}{#1}
    }
    \author{}
    \date{}
    \renewcommand\cftsubsecafterpnum{\vskip8pt}


    \titleformat{\subsection}
        {\color{thmC!90!defC}\normalfont\LARGE\bfseries}
        {}
        {.5em}
        {}
\fi


